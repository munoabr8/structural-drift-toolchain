#!/bin/bash


# Never edit .git/hooks/ directly.
# Always treat it as a runtime mirror of what's versioned in tools/git-hooks/.

# Get to project root regardless of where this is called from
REPO_ROOT="$(cd "$(dirname "$0")/../.." && pwd)"
cd "$REPO_ROOT"



echo "ğŸ›¡ï¸  Running pre-push structural checks..."

echo "ğŸ›¡ï¸  Running Preflight Checks..."
make preflight || { echo "âŒ Preflight checks failed â€” push aborted."; exit 1; }
echo "âœ… Preflight passed â€” proceeding with push."

make check-structure-drift || { echo "âŒ Drift detected â€” push blocked."; exit 1; }
make enforce-structure || { echo "âŒ Structure invalid â€” push blocked."; exit 1; }
make test-structure || { echo "âŒ Structure tests failed â€” push blocked."; exit 1; }




echo "âœ… All checks passed. Push allowed."